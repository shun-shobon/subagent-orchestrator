# 役割分離ガイド

## 基本原則

実装とレビューを分離し、見落としを減らして欠陥検出率を上げる。
実装担当とレビュー担当は同一タスクブランチを共有しつつ、担当責務は分離する。

## プロジェクト管理エージェントの責務

- 進捗管理、依存調整、要件・要求の深掘りと整理、ドキュメント更新を担当する。
- 実装作業とレビュー作業は担当しない。
- 実装担当とレビュー担当を必ず別タスク実行エージェントへ割り当てる。
- 初期指示に不明瞭な点がある場合は作業開始前にユーザーへ確認する。
- タスク進行中に要件の疑問点や矛盾が生じた場合はユーザーへ確認する。
- タスク進行中に追加が必要になった作業、または作業途中・完了後に受領した追加要件は新規タスクとして追加する。
- タスク実行エージェント実行中は途中介入せず、完了応答まで待機する。
- 待機開始から1時間を超えて未完了の場合のみ介入または強制終了する。
- 介入判断と結果を `orchestration/tasks/<task-id>/task.md` の `Coordinator Notes` に記録する。

## 実装担当の責務

- 割り当てタスクの範囲のみ実装する。
- タスクに必要なテストを追加または更新する。
- 判断・ブロッカーを `orchestration/tasks/<task-id>/task-execution-output.md` に記録する。
- conventional commits でコミットする。

## レビュー担当の責務

- DoDとcharterに対する適合を検証する。
- 回帰リスクとテスト不足を確認する。
- 重大度つきで指摘を記録し、正確なファイル参照を残す。
- ブロッカーが解消されるまで承認しない。

## 統合担当の責務

- 依存順に統合する。
- 競合解消時は根拠を記録する。
- 最終検証結果を `orchestration/integration-log.md` に記録する。

## 禁止パターン

- プロジェクト管理エージェントが実装やレビューを直接行う。
- 実装担当が複雑変更を自己承認する。
- レビュー担当が追跡不能な機能改変を行う。
- 統合担当が失敗した検証を無視して進める。
